var z=Object.defineProperty,j=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var P=(e,u,t)=>u in e?z(e,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[u]=t,C=(e,u)=>{for(var t in u||(u={}))X.call(u,t)&&P(e,t,u[t]);if(N)for(var t of N(u))H.call(u,t)&&P(e,t,u[t]);return e},k=(e,u)=>j(e,K(u));import{d as J,r as q,a as w,b,w as S,o as F,c as y,e as d,t as v,u as s,f as o,g,E as Q,h as B,i as W,j as Y,k as I,l as A,m as V,F as $,n as x,p as Z,q as M,s as G,v as ee,x as ue,y as te,z as re,A as se}from"./vendor.21cb8d40.js";const le=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}};le();var R=(e=>(e.Male="\u7537",e.Female="\u5973",e.Other="\u5176\u4ED6",e.Unknow="\u4E0D\u613F\u900F\u9732",e))(R||{}),D=(e=>(e.Long="\u8FDC\u7A0B\u652F\u6301",e.Sponsor="\u8D5E\u52A9\u5546",e.Base="\u6807\u51C6",e))(D||{});function oe(){const e=[{type:D.Long,desc:"\u53EF\u83B7\u5F97PPT\u7B49\u8D44\u6599",price:9.99,quantity:100},{type:D.Sponsor,desc:"\u83B7\u5F97\u54C1\u724C\u6F0F\u51FA\u673A\u4F1A,\u8BE6\u60C5\u8054\u7CFB123456789",price:9.99,quantity:5},{type:D.Base,desc:"\u53EF\u83B7\u5F97\u6D3B\u52A8\u73B0\u573A\u53C2\u52A0\u6D3B\u52A8\u7684\u673A\u4F1A",price:.99,quantity:100}];return Promise.resolve(e)}const O=J({id:"order-store",state:()=>({ticketOrders:new Map,buyer:null}),actions:{addTicketOrder(e){var t;const u=this.ticketOrders.get(e.type);if(!((t=u==null?void 0:u.buyer)==null?void 0:t.length))this.ticketOrders.set(e.type,k(C({},e),{buyer:[{code:"",name:""}]}));else{const n=[...u.buyer];n.push(q({code:"",name:""})),this.ticketOrders.set(e.type,k(C({},e),{buyer:n}))}},removeTicket(e){const u=this.ticketOrders.get(e),t=[...u==null?void 0:u.buyer],n=t.length;let l=null;for(let r=0;r<n;r++)(!t[r].code||!t[r].name)&&(l=r);l===null?t.pop():t.splice(l,1),this.ticketOrders.set(e,k(C({},u),{count:t.length,buyer:t}))},setBuyer(e){this.buyer=e}}}),ne={class:"ticket"},ae={class:"ticket-left"},ie={class:"ticket-left-type"},ce={class:"ticket-left-des"},de={class:"ticket-left-price"},pe={key:0,class:"ticket-left-quantity"},fe={class:"ticket-right"},me=w({props:{ticket:null},setup(e){const u=e,t=O(),{ticket:n}=u,l=b(0);return S(l,(r,a)=>{r>a?t.addTicketOrder({type:n.type,price:n.price,count:r}):t.removeTicket(n.type)}),(r,a)=>(F(),y("div",ne,[d("div",ae,[d("p",ie,v(s(n).type),1),o(s(Q),{content:s(n).desc,placement:"top"},{default:g(()=>[d("p",ce,v(s(n).desc),1)]),_:1},8,["content"]),d("p",de,[B(v(s(n).price)+" \u5143 ",1),s(n).quantity<10?(F(),y("span",pe,"\u4EC5\u5269 "+v(s(n).quantity)+" \u5F20",1)):W("",!0)])]),d("div",fe,[d("div",null,[o(s(Y),{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=p=>l.value=p),step:1,min:0,max:s(n).quantity},null,8,["modelValue","max"])])])]))}});function U(e){return e=e.toString(),/^1(3\d|4[5-9]|5[0-35-9]|6[2567]|7[0-8]|8\d|9[0-35-9])\d{8}$/.test(e)}function L(e){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)}function Fe(e){return/^[\u4E00-\u9FA5]{2,4}$/.test(e)}function ge(e){return e=e.toString(),/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}$)/.test(e)}const Be={class:"buyer"},ye=d("p",null,"\u624B\u673A\u53F7",-1),Ee=d("p",null,"\u7535\u5B50\u90AE\u7BB1",-1),_e=w({setup(e,{expose:u}){const l=q({phone:[{required:!0,trigger:"change",message:"\u624B\u673A\u53F7\u662F\u5FC5\u987B\u7684"},{validator:(f,i,c)=>{U(i)?c():c(new Error("\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF"))},trigger:"blur"}],mail:[{required:!0,trigger:"change",message:"\u90AE\u7BB1\u662F\u5FC5\u987B\u7684"},{validator:(f,i,c)=>{L(i)?c():c(new Error("\u90AE\u7BB1\u683C\u5F0F\u9519\u8BEF"))},trigger:"blur"}]}),r=q({phone:"",mail:""}),a=O();S(r,f=>{L(r.mail)&&U(r.phone)&&a.setBuyer(f)});const p=b();function E(){let f=!1;return p.value.validate(i=>f=i),f}return u({validate:E}),(f,i)=>(F(),y("div",Be,[o(s(I),{ref_key:"buyerRef",ref:p,model:s(r),rules:s(l),statusIcon:!0},{default:g(()=>[o(s(A),{prop:"phone",style:{margin:"0"}},{default:g(()=>[ye,o(s(V),{modelValue:s(r).phone,"onUpdate:modelValue":i[0]||(i[0]=c=>s(r).phone=c),class:"input",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u624B\u673A\u53F7,\u5C06\u7528\u4E8E\u63A5\u6536\u77ED\u4FE1"},null,8,["modelValue"])]),_:1}),o(s(A),{prop:"mail",style:{margin:"0"}},{default:g(()=>[Ee,o(s(V),{modelValue:s(r).mail,"onUpdate:modelValue":i[1]||(i[1]=c=>s(r).mail=c),class:"input",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u7535\u5B50\u90AE\u7BB1,\u5C06\u7528\u4E8E\u63A5\u6536\u51FA\u7968\u90AE\u4EF6"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]))}}),he={class:"title"},ve={class:"participant"},Ae=d("p",null,"\u771F\u5B9E\u59D3\u540D",-1),Ce=d("p",null,"\u8EAB\u4EFD\u8BC1\u53F7",-1),ke=d("p",{style:{width:"100%"}},"\u6027\u522B",-1),De=w({setup(e,{expose:u}){const t=O(),{ticketOrders:n}=t,a={name:[{required:!0,trigger:"change",message:"\u59D3\u540D\u662F\u5FC5\u987B\u7684"},{validator:(i,c,m)=>{Fe(c)?m():m(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u59D3\u540D"))},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"\u8EAB\u4EFD\u8BC1\u53F7\u662F\u5FC5\u987B\u7684"},{validator:(i,c,m)=>{ge(c)?m():m(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u8EAB\u4EFD\u8BC1\u53F7"))},trigger:"blur"}],gender:[{required:!0,trigger:"change",message:"\u8BF7\u9009\u62E9\u6027\u522B"}]};let p=[];const E=i=>{i&&p.push(i)};function f(){let i=!1;for(let c=0;c<p.length;c++)p[c].validate(m=>i=m);return i}return u({validate:f}),(i,c)=>(F(),y("div",null,[(F(!0),y($,null,x(s(n),m=>(F(),y("div",{key:m[0]},[(F(!0),y($,null,x(m[1].buyer,(h,T)=>(F(),y("div",null,[d("p",he,"\u53C2\u4E0E\u8005\u4FE1\u606F (\u201C"+v(m[1].type)+"\u201D\u7968\u7B2C "+v(T+1)+" \u4F4D)",1),d("div",ve,[o(s(I),{model:h,ref_for:!0,ref:E,rules:a,statusIcon:!0,class:"buyer"},{default:g(()=>[o(s(A),{prop:"name",style:{margin:"0"}},{default:g(()=>[Ae,o(s(V),{modelValue:h.name,"onUpdate:modelValue":_=>h.name=_,class:"input",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u771F\u5B9E\u59D3\u540D"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(s(A),{prop:"code",style:{margin:"0"}},{default:g(()=>[Ce,o(s(V),{modelValue:h.code,"onUpdate:modelValue":_=>h.code=_,class:"input",placeholder:"\u7531\u4E8E\u73B0\u573A\u5B89\u4FDD,\u8BF7\u8F93\u5165\u60A8\u7684\u8EAB\u4EFD\u8BC1\u53F7"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(s(A),{prop:"gender"},{default:g(()=>[ke,o(s(Z),{modelValue:h.gender,"onUpdate:modelValue":_=>h.gender=_},{default:g(()=>[(F(!0),y($,null,x(s(R),_=>(F(),M(s(G),{label:_},{default:g(()=>[d("span",null,v(_),1)]),_:2},1032,["label"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["model"])])]))),256))]))),128))]))}}),be=ee(async()=>{const e=await oe(),u=O(),t=ue(()=>{const a=u.ticketOrders;let p=0,E=0;return a.forEach(f=>{p+=f.count,E+=f.count*f.price}),{count:p,price:E}});let n=b(),l=b();function r(){let a=!1;if(a=n.value.validate(),a=l.value.validate(),a){const{ticketOrders:p,buyer:E}=u;console.log("\u63D0\u4EA4\u7684\u6570\u636E",p,E)}}return()=>o("div",null,[o("p",{class:"title"},[B("\u9009\u62E9\u7968\u79CD")]),e.map(a=>o(me,{ticket:a},null)),o("p",{class:"title"},[B("\u8D2D\u7968\u4EBA\u4FE1\u606F")]),o(_e,{ref:n},null),o(De,{ref:l,style:"margin-bottom:20px;"},null),o("div",{class:"footer"},[o("div",{class:"footer-left"},[o("p",null,[B("\u5171\u5F20 "),o("span",{class:"number"},[t.value.count,B(" ")]),B(" \u5F20\u7968")]),o("p",null,[B("\u5408\u8BA1 "),o("span",{class:"number"},[t.value.price.toFixed(2)]),B(" \u5143")])]),o("div",{class:"footer-right"},[o(te,{onClick:a=>r(),type:"primary",size:"large",style:"flex:1;",disabled:t.value.count===0},{default:()=>[B("\u7ACB\u5373\u652F\u4ED8")]})])])])}),Ve=w({setup(e){return(u,t)=>(F(),M(s(be)))}});re(Ve).use(se()).mount("#app");
